#!/usr/bin/env bash
source $(dirname $0)/_colors

info=$(upower -i /org/freedesktop/UPower/devices/battery_BAT0)
perc=$(echo "$info" | awk '/percentage:/ { print $2 }' | sed 's/%//')
time=$(echo "$info" | awk '/time to (empty|full):/ { printf "%.1s %.0f%.1s", $3, $4, $5 }' | sed 'y/ef/↓↑/')

# full text
if [[ -n "$time" ]]; then
  echo "${perc} $time "
else
  echo "${perc} "
fi

# short text
echo

# color
if (( $(echo "$perc > 60" | bc -l) )); then
  echo ${base07}
elif (( $(echo "$perc > 40" | bc -l) )); then
  echo ${base0A}
elif (( $(echo "$perc > 20" | bc -l) )); then
  echo ${base09}
else
  echo ${base08}
fi


