#!/usr/bin/env bash

cpu=$(top -bn1 | grep load)
regex="load average: ([0-9.]+), ([0-9.]+), ([0-9.]+)"
full=$(grep -c 'model name' /proc/cpuinfo)

# full text
[[ $cpu =~ $regex ]]
echo "${BASH_REMATCH[1]}"

# short text
echo

# color
if (( $(echo "${BASH_REMATCH[3]} > $full * 0.8" | bc -l) )); then
  echo "{{ i3.urgent }}"
elif (( $(echo "${BASH_REMATCH[1]} > $full" | bc -l) )); then
  echo "{{ i3.warning }}"
else
  echo "{{ i3.fg }}"
fi

