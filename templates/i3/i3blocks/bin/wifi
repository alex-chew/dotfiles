#!/usr/bin/env bash

info=$(nmcli -t -f 'ACTIVE,SSID,SIGNAL' dev wifi | awk '/^yes/')

if [[ -z "$info" ]]; then
  # full text
  echo "--"
  # short text
  echo
  #color
  echo {{ i3.fg_inactive }}
else
  ssid=$(echo "$info" | cut -d ':' -f 2)
  qual=$(echo "$info" | cut -d ':' -f 3)

  # full text
  echo "$ssid ($qual)"

  # short text
  echo

  # color
  if (( "$qual" > 50 )); then
    echo "{{ i3.fg }}"
  elif (( "$qual" > 20 )); then
    echo "{{ i3.warning }}"
  else
    echo "{{ i3.urgent }}"
  fi

fi

